{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// functions for HTTP\nimport axios from 'axios';\n\nexport async function getImages(param) {\n  param.key = '44735338-079c6790302f7dc185545e42d';\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: param,\n    });\n    return response.data;\n  } catch (err) {\n    err => `Error in FETCH: ${err}`;\n  }\n}\n","export function cardTemplate({\n  largeImageURL,\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n    <li class=\"image\">\n    <a href=\"${largeImageURL}\" class='js-link'> \n      <img src=\"${webformatURL}\" alt=\"${tags}\"> \n    </a>\n      <div class=\"'params\">\n      <div><h3>Likes</h3><p>${likes}</p></div>\n      <div><h3>Views</h3><p>${views}</p></div>\n      <div><h3>Comments</h3><p>${comments}</p></div>\n      <div><h3>Downloads</h3><p>${downloads}</p></div>\n      </div>\n      </li>\n      `;\n}\n\nexport function cardsTemplate(cards) {\n  return cards.map(cardTemplate).join('');\n}\n","//! All logic for Web-Site\n\nimport { getImages } from './js/pixabay-api';\nimport { cardsTemplate } from './js/render-functions';\n\n//*======================================= Library\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport cssLoader from 'css-loader';\n\n//*======================================= ELEMENTS\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  input: document.querySelector('input'),\n  list: document.querySelector('.gallery'),\n  load: document.querySelector('.loader'),\n  btnMore: document.querySelector('.load-more-btn'),\n  preLoader: document.querySelector('.pre-loader'),\n};\n\n//*======================================= ADDITIONAL\n\nconst lightbox = new SimpleLightbox('.gallery a ', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nconst param = {\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: 1,\n  per_page: 15,\n  maxPage: 0,\n};\n\n//!======================================= SUBMIT ================\n\nrefs.form.addEventListener('submit', btnEvent);\n\nasync function btnEvent(e) {\n  e.preventDefault();\n  refs.list.innerHTML = '';\n  refs.btnMore.classList.add('hidden');\n  param.page = 1;\n  const userValue = refs.input.value.trim();\n  if (userValue.length !== 0 && userValue !== '') {\n    refs.load.classList.remove('hidden');\n\n    param.q = userValue;\n    await getImages(param)\n      .then(data => {\n        if (data.total === 0) {\n          refs.load.classList.add('hidden');\n          refs.input.value = '';\n          refs.list.textContent = '';\n\n          iziToast.show({\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            backgroundColor: '#EF4040',\n            messageColor: 'white',\n            position: 'topRight',\n            class: 'error',\n          });\n        } else {\n          const markUp = cardsTemplate(data.hits);\n          refs.list.innerHTML = markUp;\n\n          param.maxPage = Math.ceil(data.totalHits / param.per_page);\n\n          lightbox.refresh();\n\n          refs.input.value = '';\n\n          refs.load.classList.add('hidden');\n          refs.btnMore.classList.remove('hidden');\n        }\n      })\n      .catch(err => console.error(err));\n  }\n}\n\n//!======================================= LOAD-MORE ==========================\n\nrefs.btnMore.addEventListener('click', toDoLoadMore);\n\nasync function toDoLoadMore() {\n  param.page += 1;\n\n  refs.preLoader.classList.remove('hidden');\n  refs.btnMore.disabled = true;\n\n  await getImages(param)\n    .then(data => {\n      const markUp = cardsTemplate(data.hits);\n      refs.list.insertAdjacentHTML('beforeend', markUp);\n\n      lightbox.refresh();\n\n      if (param.page === param.maxPage) {\n        refs.btnMore.classList.add('hidden');\n\n        iziToast.show({\n          message: `We're sorry, but you've reached the end of search results`,\n          backgroundColor: '#EF4040',\n          messageColor: 'white',\n          position: 'topRight',\n          class: 'error',\n        });\n      } else {\n        refs.btnMore.disabled = false;\n        refs.preLoader.classList.add('hidden');\n      }\n      const card = document.querySelector('.image');\n      let cardSize = card.getBoundingClientRect();\n      const cardHeight = cardSize.height;\n\n      window.scrollBy({\n        top: cardHeight * 2.5,\n        behavior: 'smooth',\n      });\n    })\n    .catch(err => console.error(err));\n}\n"],"names":["getImages","param","axios","cardTemplate","largeImageURL","webformatURL","tags","likes","views","comments","downloads","cardsTemplate","cards","refs","lightbox","SimpleLightbox","btnEvent","e","userValue","data","iziToast","markUp","err","toDoLoadMore","cardHeight"],"mappings":"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"}